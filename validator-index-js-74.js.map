{"version":3,"sources":["webpack://credit-card-validator/./src/components/cardValidator/cardTypes.js","webpack://credit-card-validator/./src/components/cardValidator/index.js","webpack://credit-card-validator/./src/components/cardValidator/luhn.js","webpack://credit-card-validator/./src/pages/validator/index.js"],"names":["name","fullName","startDigit","digitCount","url","CardValidator","constructor","event","preventDefault","this","check","render","wrapper","document","createElement","innerHTML","getTemplate","element","firstElementChild","subElements","getSubElements","initEventListeners","formGroup","addEventListener","onSubmit","value","setValue","ch","num","String","replace","isOdd","length","i","n","parseInt","luhn","checkDigitStart","checked","cardTypes","card","startsWith","undefined","includes","showCard","cards","querySelectorAll","forEach","classList","add","remove","addCards","map","join","elements","item","dataset","destroy","Page","initComponents","renderComponents","cardValidator","components","Object","keys","component","console","log","root","append","removeEventListeners","values"],"mappings":"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","file":"validator-index-js-74.js","sourcesContent":["const cardTypes = [\n  {\n    name: 'visa',\n    fullName: 'Visa',\n    startDigit: 4,\n    digitCount: [13, 16],\n    url: './assets/cards/visa_curved.png'\n  },\n  {\n    name: 'mastercard',\n    fullName: 'MasterCard',\n    startDigit: 5,\n    digitCount: [16],\n    url: './assets/cards/mastercard_curved.png'\n  },\n  {\n    name: 'americanexpress',\n    fullName: 'American Express',\n    startDigit: 3,\n    digitCount: [15],\n    url: './assets/cards/american_express_curved.png'\n  },\n];\n\nexport default cardTypes;\n","import cardTypes from \"./cardTypes\";\nimport luhn from './luhn';\n\nexport default class CardValidator {\n    subElements = {};\n    start;\n    score = 0;\n\n\n    onSubmit = (event) => {\n        event.preventDefault();\n        this.check();\n    }\n\n    constructor() {\n        this.render();\n    }\n\n    render() {\n        const wrapper = document.createElement('div');\n\n        wrapper.innerHTML = this.getTemplate();\n        this.element = wrapper.firstElementChild;\n\n        this.subElements = this.getSubElements();\n        this.initEventListeners();\n    }\n\n    initEventListeners() {\n        const { formGroup } = this.subElements;\n\n        formGroup.addEventListener('submit', this.onSubmit);\n\n    }\n\n    check() {\n        const { formGroup } = this.subElements;\n        this.value = formGroup.check.value;\n\n\n        if (luhn(this.value)) {\n            this.checkDigitStart()\n        }\n    }\n\n    checkDigitStart() {\n        const checked = cardTypes.find((card) => this.value.startsWith(card.startDigit));\n        if (checked !== undefined && checked.digitCount.includes(this.value.length)) {\n            this.showCard(checked);\n        } else {\n            this.showCard();\n        }\n    }\n\n    showCard(checked = false) {\n        const cards = this.subElements.cards.querySelectorAll('.validator__img');\n        cards.forEach((card) => card.classList.add('validator__img_darken'));\n        if (checked) {\n            this.subElements[checked['name']].classList.remove('validator__img_darken');\n        }\n    }\n\n    addCards() {\n        return [...cardTypes].map((card) => {\n            return `<img class=\"validator__img\"  data-element=\"${card.name}\" src=\"${card.url}\" alt=\"${card.fullName}\">`\n        }).join('');\n    }\n\n    getSubElements() {\n        const elements = this.element.querySelectorAll('[data-element]')\n        for (const item of elements) {\n            this.subElements[item.dataset.element] = item;\n        }\n        return this.subElements;\n    }\n\n\n\n    getTemplate() {\n        return `<div class=\"validator\">\n        <div class=\"validator__cards\" data-element=\"cards\">\n        ${this.addCards()}\n        </div>\n        <form class=\"form-group\" data-element=\"formGroup\">\n            <label for=\"input\" class=\"form-group__label\">Check card</label>\n            <div class=\"form-group__input\">\n                <input class=\"form-group__control\" data-element=\"formInput\" type=\"number\" id=\"input\" name=\"check\" placeholder=\"number card\" required>\n                <button type=\"submit\" class=\"button button_primary\">\n                Click to validate\n             </button>\n            </div>\n        </form>    \n    </div>`\n    }\n\n\n\n    remove() {\n        if (this.element) {\n            this.element.remove();\n        }\n    }\n\n    destroy() {\n        this.remove();\n        this.element = null;\n        this.subElements = null;\n    }\n\n\n}","\nexport default setValue => {\n  let ch = 0;\n  const num = String(setValue).replace(/\\D/g, '');\n  const isOdd = num.length % 2 !== 0;\n\n  if ('' === num) {return false;}\n\n  for (let i = 0; i < num.length; i++) {\n    let n = parseInt(num[i], 10);\n\n    ch += (isOdd | 0) === (i % 2) && 9 < (n *= 2) ? (n - 9) : n;\n  }\n\n  return 0 === (ch % 10);\n};","import CardValidator from \"../../components/cardValidator\";\n\n\nexport default class Page {\n    subElements = {};\n    components = {};\n\n\n    render() {\n\n        const element = document.createElement('div');\n        element.innerHTML = this.getTemplate();\n\n        this.element = element.firstElementChild;\n\n        this.subElements = this.getSubElements();\n        this.initComponents();\n        this.renderComponents();\n\n        return this.element;\n    }\n\n\n    initComponents() {\n        const cardValidator = new CardValidator()\n\n        this.components = {\n            cardValidator,\n        }\n    }\n\n    renderComponents() {\n        Object.keys(this.components).forEach(component => {\n            console.log(component);\n            const root = this.subElements[component];\n            const { element } = this.components[component];\n            root.append(element);\n        })\n    }\n\n\n\n    getSubElements() {\n        const elements = this.element.querySelectorAll('[data-element]')\n        for (const item of elements) {\n            this.subElements[item.dataset.element] = item;\n        }\n        return this.subElements;\n    }\n\n    removeEventListeners() {\n        this.removeEventListeners();\n    }\n\n    remove() {\n        if (this.element) {\n            this.element.remove()\n        }\n    }\n\n    destroy() {\n        this.remove();\n        this.element = null;\n        this.subElements = null;\n\n\n        for (const component of Object.values(this.components)) {\n            component.destroy();\n        }\n    }\n\n\n    getTemplate() {\n        return `\n        <div data-element=\"content\">\n            <div data-element=\"cardValidator\"></div>\n    </div>\n        `\n    }\n}"],"sourceRoot":""}