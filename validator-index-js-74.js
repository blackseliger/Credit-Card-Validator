"use strict";(self.webpackChunkcredit_card_validator=self.webpackChunkcredit_card_validator||[]).push([[74],{665:(e,t,s)=>{s.r(t),s.d(t,{default:()=>l});const n=[{name:"visa",fullName:"Visa",startDigit:4,digitCount:[13,16],url:"./assets/cards/visa_curved.png"},{name:"mastercard",fullName:"MasterCard",startDigit:5,digitCount:[16],url:"./assets/cards/mastercard_curved.png"},{name:"americanexpress",fullName:"American Express",startDigit:3,digitCount:[15],url:"./assets/cards/american_express_curved.png"}];function r(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}class i{constructor(){r(this,"subElements",{}),r(this,"start",void 0),r(this,"score",0),r(this,"onSubmit",e=>{e.preventDefault(),this.check()}),this.render()}render(){const e=document.createElement("div");e.innerHTML=this.getTemplate(),this.element=e.firstElementChild,this.subElements=this.getSubElements(),this.initEventListeners()}initEventListeners(){const{formGroup:e}=this.subElements;e.addEventListener("submit",this.onSubmit)}check(){const{formGroup:e}=this.subElements;this.value=e.check.value,(e=>{let t=0;const s=String(e).replace(/\D/g,""),n=s.length%2!=0;if(""===s)return!1;for(let e=0;e<s.length;e++){let r=parseInt(s[e],10);t+=(0|n)==e%2&&9<(r*=2)?r-9:r}return 0==t%10})(this.value)&&this.checkDigitStart()}checkDigitStart(){const e=n.find(e=>this.value.startsWith(e.startDigit));void 0!==e&&e.digitCount.includes(this.value.length)?this.showCard(e):this.showCard()}showCard(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];this.subElements.cards.querySelectorAll(".validator__img").forEach(e=>e.classList.add("validator__img_darken")),e&&this.subElements[e.name].classList.remove("validator__img_darken")}addCards(){return[...n].map(e=>`<img class="validator__img"  data-element="${e.name}" src="${e.url}" alt="${e.fullName}">`).join("")}getSubElements(){const e=this.element.querySelectorAll("[data-element]");for(const t of e)this.subElements[t.dataset.element]=t;return this.subElements}getTemplate(){return`<div class="validator">\n        <div class="validator__cards" data-element="cards">\n        ${this.addCards()}\n        </div>\n        <form class="form-group" data-element="formGroup">\n            <label for="input" class="form-group__label">Check card</label>\n            <div class="form-group__input">\n                <input class="form-group__control" data-element="formInput" type="number" id="input" name="check" placeholder="number card" required>\n                <button type="submit" class="button button_primary">\n                Click to validate\n             </button>\n            </div>\n        </form>    \n    </div>`}remove(){this.element&&this.element.remove()}destroy(){this.remove(),this.element=null,this.subElements=null}}function a(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}class l{constructor(){a(this,"subElements",{}),a(this,"components",{})}render(){const e=document.createElement("div");return e.innerHTML=this.getTemplate(),this.element=e.firstElementChild,this.subElements=this.getSubElements(),this.initComponents(),this.renderComponents(),this.element}initComponents(){const e=new i;this.components={cardValidator:e}}renderComponents(){Object.keys(this.components).forEach(e=>{console.log(e);const t=this.subElements[e],{element:s}=this.components[e];t.append(s)})}getSubElements(){const e=this.element.querySelectorAll("[data-element]");for(const t of e)this.subElements[t.dataset.element]=t;return this.subElements}removeEventListeners(){this.removeEventListeners()}remove(){this.element&&this.element.remove()}destroy(){this.remove(),this.element=null,this.subElements=null;for(const e of Object.values(this.components))e.destroy()}getTemplate(){return'\n        <div data-element="content">\n            <div data-element="cardValidator"></div>\n    </div>\n        '}}}}]);
//# sourceMappingURL=validator-index-js-74.js.map